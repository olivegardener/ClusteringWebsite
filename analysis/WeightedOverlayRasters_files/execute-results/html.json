{
  "hash": "18ed18e7880d63948102452af894fc76",
  "result": {
    "markdown": "---\ntitle: \"Raster Pre-Processing\"\nauthor: \"Oliver Atwood\"\noutput: html_document\ndate: \"2023-12-19\"\n---\n\n# Overview\n<br>\nThis r markdown script pre-processes raster data used in the Hotspot Stoplight Project for visualization and cluster analysis. The datasets used in this project are as follows:\n\n* LAND COVER CHANGE PROBABILITY - [Clark Labs](https://env1.arcgis.com/arcgis/rest/services/Land_Cover_Vulnerability_2050/ImageServer0)\n* BIODIVERSITY INTACTNESS INDEX - [Impact Observatory](https://gee-community-catalog.org/projects/bii/)\n* CLIMATE RISK INDEX - Hotspot Stoplight Team: [Nissim Lebovits](http://nlebovits.github.io/)\n* GRIDDED 2020 POPULATION - [Global Human Settlements Layer](https://ghsl.jrc.ec.europa.eu/download.php?ds=bu)\n* URBAN LAND COVER PROBABILITY - Hotspot Stoplight Team: Oliver Atwood, using classified data from Tristan Grupp\n<br>\n<br>\n\n* Each of these raster datasets are loaded into R and their Coordinate Systems, Resolution, and Extent are standardized. NA values are then removed and each dataset is standardized.\n<br>\n* Four of these standardized datasets are then combined to produce two 'Interaction Rasters', using the following formulas:\n<br>\nBio_x_Risk = LCC_Probability * BII\n<br>\n*Bio_x_Risk emphasizes areas of high land cover change probability and high biodiversity intactness.*\n<br>\nAnthro_x_Risk = Climate_Hazards * pop2020\n<br>\n*Anthro_x_Risk emphasizes areas of high climate hazard probability and high human population.*\n<br>\nUrban Land Cover Probability is a dataset generated through a random forest model trained on a range of physiographic factors to predict the likelihood of a given cell of a land cover raster to be urban in 2033.\n<br>\n\n* Bio_x_Risk and Anthro_x_Risk were both normalized and Bio_x_Risk, Anthro_x_Risk, and Urban Land Cover Probability were exported for clustering analysis.\n<br>\n* These three datasets were then added together and the resultant raster dataset was normalized to produce a 'Stoplight for Urban Development'.\n\n\n\n\n::: {.cell hash='WeightedOverlayRasters_cache/html/unnamed-chunk-1_d3c294b0b2c1eb242bd38248103222e2'}\n\n```{.r .cell-code}\nlibrary(sf)\nlibrary(raster)\nlibrary(dplyr)\nlibrary(readr)\nlibrary(terra)\nlibrary(spdep)\nlibrary(rasterVis)\n\n# Capture the start time\n# start_time <- Sys.time()\n```\n:::\n\n\n## Setting Parameters\n\n::: {.cell hash='WeightedOverlayRasters_cache/html/unnamed-chunk-2_9080e635f6eb646085d9f493126f6d26'}\n\n```{.r .cell-code}\ncoordinate_system <- 4326\n# Target resolution in m\nresolution <- 30\n# Conversion to degrees\nresolution <- (resolution/30)/3600\n```\n:::\n\n\n## Loading Datasets\n\n::: {.cell hash='WeightedOverlayRasters_cache/html/unnamed-chunk-3_f06ddb804f647f1919d6229f2a7d8ecc'}\n\n:::\n\n## Check Raster Coordinate Systems, Resolutions, and Extents\n\n::: {.cell hash='WeightedOverlayRasters_cache/html/unnamed-chunk-4_73018e1f651808a523699736514cab4a'}\n\n```\n## Coordinate system does not match\n## Resolution does not match\n## Extent does not match\n```\n:::\n\n\n## Unify Raster Coordinate Systems, Resolutions, and Extents\n\n::: {.cell hash='WeightedOverlayRasters_cache/html/unnamed-chunk-5_1c2b0689e6b8c01ac50e3a7476edf081'}\n\n:::\n\n\n## Plot Rasters for Visual Inspection\n\n::: {.cell hash='WeightedOverlayRasters_cache/html/unnamed-chunk-6_3bc785f6920c4e45b0c61cddf2206b1d'}\n::: {.cell-output-display}\n![](WeightedOverlayRasters_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](WeightedOverlayRasters_files/figure-html/unnamed-chunk-6-2.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](WeightedOverlayRasters_files/figure-html/unnamed-chunk-6-3.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](WeightedOverlayRasters_files/figure-html/unnamed-chunk-6-4.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](WeightedOverlayRasters_files/figure-html/unnamed-chunk-6-5.png){width=672}\n:::\n:::\n\n## Double-Check Raster Coordinate Systems, Resolutions, and Extents\n\n::: {.cell hash='WeightedOverlayRasters_cache/html/unnamed-chunk-7_b848ec8966148f75fa4766c0e526068d'}\n\n```\n## Coordinate system matches\n## Resolution matches\n## Extent matches\n```\n:::\n\n## Remove all NA values from rasters\n\n::: {.cell hash='WeightedOverlayRasters_cache/html/unnamed-chunk-8_9b4c5ea8fe5c4ffcdad26493e536cf78'}\n\n:::\n\n\n## Normalize all rasters\n\n::: {.cell hash='WeightedOverlayRasters_cache/html/unnamed-chunk-9_c26157adc17f3b243827f3c2e188ab6a'}\n\n```\n## Min value: 0 Max value: 1000 \n## Min value: 0 Max value: 0.9647594 \n## Min value: 0.001399566 Max value: 0.9714958 \n## Min value: 0 Max value: 579.4982 \n## Min value: -1.582723e-14 Max value: 1\n```\n:::\n\n\n## Generate Interaction Rasters\n\n::: {.cell hash='WeightedOverlayRasters_cache/html/unnamed-chunk-10_886d5fb06b9861c63ebd36a46e776796'}\n\n```\n## Min value: 0 Max value: 0.9497479\n## Min value: 0 Max value: 0.842676\n## Min value: 0 Max value: 1\n```\n:::\n\n\n## Overlay Rasters to Produce 'Stoplight For Urban Development'\n\n::: {.cell hash='WeightedOverlayRasters_cache/html/unnamed-chunk-11_c74277b63698c60a54b774875d0523ff'}\n\n```\n## Min value: -0.9994601 Max value: 0.9963884\n```\n:::\n\n\n# Plots\n<br>\n\n::: {.cell hash='WeightedOverlayRasters_cache/html/unnamed-chunk-12_c39bb1898372ad77458f6d439766d0c0'}\n::: {.cell-output-display}\n![](WeightedOverlayRasters_files/figure-html/unnamed-chunk-12-1.png){width=960}\n:::\n:::\n\n::: {.cell hash='WeightedOverlayRasters_cache/html/unnamed-chunk-13_da6286fbd3acf8e68c2afdb8f8bf4022'}\n::: {.cell-output-display}\n![](WeightedOverlayRasters_files/figure-html/unnamed-chunk-13-1.png){width=960}\n:::\n:::\n\n::: {.cell hash='WeightedOverlayRasters_cache/html/unnamed-chunk-14_bbcec5ebaa428a12c34ca83ff188d78e'}\n::: {.cell-output-display}\n![](WeightedOverlayRasters_files/figure-html/unnamed-chunk-14-1.png){width=960}\n:::\n:::\n\n\n## Hotspot Stoplight Raster\n\n::: {.cell hash='WeightedOverlayRasters_cache/html/unnamed-chunk-15_49f16f14024fdaab8b82d4948b083901'}\n::: {.cell-output-display}\n![](WeightedOverlayRasters_files/figure-html/unnamed-chunk-15-1.png){width=960}\n:::\n:::\n\n## Export Datasets for Further Analysis\n\n::: {.cell}\n\n```{.r .cell-code}\n# # Export the raster as a TIFF\n# setwd('/Users/oliveratwood/Documents/GitHub/HotspotStoplight/VisualProduction')\n# \n# # Save the final raster\n# writeRaster(Hotspot_Stoplight, \"Hotspot_Stoplight_2023.tif\", overwrite=TRUE)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# # Export the raster as a TIFF\n# setwd('/Users/oliveratwood/Documents/GitHub/HotspotStoplight/clustering')\n# \n# # Save the final raster\n# writeRaster(Bio_x_Risk_norm, \"BioRiskNorm.tif\", overwrite=TRUE)\n# writeRaster(Anthro_x_Risk_norm, \"AnthroRiskNorm.tif\", overwrite=TRUE)\n# writeRaster(UrbanProbability_norm, \"UrbanProbability.tif\", overwrite=TRUE)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# # Capture the end time\n# end_time <- Sys.time()\n# \n# # Calculate and print the runtime\n# runtime <- end_time - start_time\n# print(paste(\"Total runtime:\", runtime))\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}